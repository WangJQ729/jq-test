keyWord:
  step:
    - name: 现货后台获取登录信息
      host: ${spotAdmin_host}
      url: /api/login
      method: POST
      body: |
        {
            "userName": "${userName}",
            "password": "${__digest(MD5,${password})}"
        }
      extractor:
        - json:
            spotAdmin_userId: $.result.userId
    - name: 现货后台获取googleKey
      host: ${spotAdmin_host}
      url: /api/get_google_key
      method: GET
      variables:
        userId: ${spotAdmin_userId}
      extractor:
        - json:
            googleKey: $.result.googleKey
    - name: 登录现货后台
      host: ${spotAdmin_host}
      url: /api/google_auth
      method: POST
      body: |
        {
            "googleCode": "${__GoogleAuthenticator(${spotAdminGoogleCode})}",
            "userName": "${userName}",
            "password": "${__digest(MD5,${password})}",
            "authType": 2,
            "googleKey": "${googleKey}"
        }
      extractor:
        - json:
            spotAdminUserId: $.result.token
          site: TESTSUITE
    - name: 修改vip等级
      host: ${spotAdmin_host}
      url: /api/user/vip/set_vip
      headers:
        Token: ${spotAdminUserId}
      method: POST
      body: |
        {
        "vipLevel": ${realVipLevel},
        "expireTime": ${__groovy((long)(${__timeShift(,,P7D,,)}/1000),)},
        "uid": ${userId}
        }
      assertion: [ json: { $.code: '0' } ]
