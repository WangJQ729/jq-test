keyWord:
  step:
    - name: 代理商现货历史委托
      host: ${partners_host}
      url: /partner/trade/order/spot_history/history
      headers:
        Token: ${partner_token}
      variables:
        page: 1
        pageSize: 10
        uid: ${userId}
        showBelow: true
      method: GET
      extractor:
        - json:
            partnerFee: $.result.fee
    - name: 合约当前持仓
      host: ${partners_host}
      url: /partner/trade/position/pending
      headers:
        Token: ${partner_token}
      method: GET
      variables:
        showBelow: true
        page: 1
        pageSize: 10
    - name: 直客合约历史委托
      url: /partner/trade/order/history
      untilWait: 10
      host: ${partners_host}
      headers:
        Token: ${partner_token}
      method: GET
      variables:
        showBelow: false
        page: 1
        pageSize: 10
        tradeType: futures
        symbol: ${symbol}
        uid: ${userId}
      assertion: [ json: { $.code: '0' } ]
      extractor:
        - json:
            openDealFee: $.result.items[0].fee
            openOrderId: $.result.items[0].orderId
    - name: 直客合约历史委托-平仓
      keyWord: 直客合约历史委托
      extractor:
        - json:
            closeDealFee: $.result.items[?(@.orderId != '${openOrderId}')].fee