keyWord:
  step:
    - name: 总后台平台收益
      host: ${partnersadmin_host}
      url: /partner/root/statistics/rebate
      method: GET
      headers:
        Token: ${partnersadmin_token}
      variables:
        startTime: ${__timeShift(yyyy-MM-dd,,P-1D,zh_CN,)}T16:00:00.000Z
        endTime: ${__timeShift(yyyy-MM-dd,,,zh_CN,)}T16:00:00.000Z
      extractor:
        - json:
            totalRebate: $.result.totalRebate
      assertion: [ json: { $.code: '0' } ]
    - name: 总后台平台收益-开仓
      keyWord: 总后台平台收益
      assertion:
        - json:
            $.result.totalRebate: ${__groovy(${totalRebate} + ${openDealFee} * (100 - ${futureSelfRatio}) / 100)}
          assertionType: EIGHTDECIMALPLACES
    - name: 总后台平台收益-平仓
      keyWord: 总后台平台收益
      assertion:
        - json:
            $.result.totalRebate: ${__groovy(${totalRebate} + ${closeDealFee} * (100 - ${futureSelfRatio}) / 100)}
          assertionType: EIGHTDECIMALPLACES
    - name: 总后台交易额
      host: ${partnersadmin_host}
      url: /partner/root/statistics/tradeAmount
      method: GET
      headers:
        Token: ${partnersadmin_token}
      variables:
        startTime: ${__timeShift(yyyy-MM-dd,,P-1D,zh_CN,)}T16:00:00.000Z
        endTime: ${__timeShift(yyyy-MM-dd,,,zh_CN,)}T16:00:00.000Z
      extractor:
        - json:
            statisticsTradeAmount: $.result.totalAmount
      assertion: [ json: { $.code: '0' } ]
    - name: 总后台交易额-开仓
      keyWord: 总后台交易额
      assertion:
        - json:
            $.result.totalAmount: ${__groovy(${statisticsTradeAmount} + ${openAvgPrice} * ${openAmount})}
    - name: 总后台交易额-平仓
      keyWord: 总后台交易额
      assertion:
        - json:
            $.result.totalAmount: ${__groovy(${statisticsTradeAmount} + ${closeAvgPrice} * ${closeAmount})}
    - name: 总后台交易额-现货
      keyWord: 总后台交易额
      assertion:
        - json:
            $.result.totalAmount: ${__groovy(${statisticsTradeAmount} + ${dealAmount})}
    - name: 总后台手续费
      host: ${partnersadmin_host}
      url: /partner/root/statistics/fee
      method: GET
      headers:
        Token: ${partnersadmin_token}
      variables:
        startTime: ${__timeShift(yyyy-MM-dd,,P-1D,zh_CN,)}T16:00:00.000Z
        endTime: ${__timeShift(yyyy-MM-dd,,,zh_CN,)}T16:00:00.000Z
      extractor:
        - json:
            statisticsTotalFee: $.result.totalFee
    - name: 总后台手续费-开仓
      keyWord: 总后台手续费
      assertion:
        - json:
            $.result.totalFee: ${__groovy(${statisticsTotalFee} + ${openDealFee})}
          assertionType: EIGHTDECIMALPLACES
    - name: 总后台手续费-平仓
      keyWord: 总后台手续费
      assertion:
        - json:
            $.result.totalFee: ${__groovy(${statisticsTotalFee} + ${closeDealFee})}
          assertionType: EIGHTDECIMALPLACES
    - name: 团队统计
      host: ${partnersadmin_host}
      url: /partner/root/get_partner_team_information
      method: GET
      headers:
        Token: ${partnersadmin_token}
      variables:
        page: 1
        pageSize: 10
        startTime: ${__timeShift(yyyy-MM-dd,,P-1D,zh_CN,)}T16:00:00.000Z
        endTime: ${__timeShift(yyyy-MM-dd,,,zh_CN,)}T16:00:00.000Z
        orderType: 0
        orderDirection: DESC

      extractor:
        - json:
            statisticsTotalFee: $.result.totalFee